package detector;


import java.util.Map;


/**
 * Класс, отвечающий за определение наиболее вероятной тематики текста
 * на основе подсчитанных частот совпадений слов по каждой теме.
 * <p>
 * Считает темой текста ту, которая набрала наибольшее количество совпадений
 * со словами из соответствующего словаря.
 * </p>
 */
public class TopicDetector {

    /** Менеджер словарей, предоставляющий доступ к темам (хотя напрямую не используется в методах). */
    private final DictionaryManager dm;

    /**
     * Создает новый экземпляр TopicDetector.
     *
     * @param dm Менеджер словарей, который содержит все доступные темы.
     */
    public TopicDetector(DictionaryManager dm) { this.dm = dm; }


    /**
     * Определяет ведущую тему на основе карты частот.
     *
     * @param counts Карта, где ключ — название темы, а значение — общее количество
     * совпадений слов из текста для этой темы.
     * @return Название темы с максимальным количеством совпадений. Если ни в одной
     * теме нет совпадений (счетчик = 0), возвращается строка "Неопределено".
     */
    public String detectTopic(Map<String, Integer> counts) {
        return counts.entrySet().stream()
                // Находим запись с максимальным значением (количеством совпадений)
                .max(Map.Entry.comparingByValue())
                // Фильтруем: учитываем только те темы, где количество совпадений > 0
                .filter(e -> e.getValue() > 0)
                // Получаем ключ (название темы)
                .map(Map.Entry::getKey)
                // Если совпадений нет, возвращаем "Неопределено"
                .orElse("Неопределено");
    }
}